# Contributing to Shortly

Спасибо за желание внести вклад в развитие проекта! Этот документ описывает правила и ожидания для контрибьюторов, чтобы поддерживать качество и согласованность кода в проекте.

## Основные принципы
- Будьте вежливы и уважительны. Открытая и конструктивная коммуникация приветствуется.
- Одна логическая задача — один pull request.
- Маленькие PR принимаются быстрее — разбивайте большие изменения.

## Как начать
1. Форкните репозиторий и создайте ветку с осмысленным именем: `feature/<краткое-описание>` или `fix/<краткое-описание>`.
2. Сделайте изменения в новой ветке.
3. Прогоните тесты локально.
4. Откройте Pull Request в ветку `master` с описанием целей и кратким гайдлайном по изменениям.

## Стиль кодирования и форматирование
- Проект использует `.editorconfig` (в корне проекта). Пожалуйста, следуйте его правилам. Основные моменты:
  - 4 пробела для отступов
  - LF окончания строк
  - Имена интерфейсов с префиксом `I`
  - Приватные поля с префиксом `_` и camelCase
  - Публичные члены в PascalCase
- Включите __Format Document__ или запустите `dotnet format` перед коммитом.
- Включите nullable reference types в новых файлах по возможности.

## Соглашения по коммитам
- Пишите осмысленные сообщения коммитов. Рекомендуется формат:
  - `feat: добавляет новую функциональность`
  - `fix: исправляет баг`
  - `chore: технические изменения, не влияющие на поведение`

## Pull Requests
- PR должен содержать описание проблемы, краткое описание решения и указание, как протестировать изменения.
- PR проверяются CI. Не принимайте PR с падающими сборками.
- Просите ревью у минимум одного участника проекта.

## Тестирование
- Добавляйте unit-тесты для новой логики.
- Для интеграционных тестов используйте in-memory SQLite или Testcontainers.
- В CI должны выполняться: `dotnet build`, `dotnet test`, `dotnet format --verify-no-changes` и статический анализ.

## База данных и миграции
- Миграции управляются через EF Core (`dotnet ef migrations add` / `dotnet ef database update`).
- Миграции добавляются в отдельной ветке и проходят ревью.
- В продакшне миграции применяются через CI/CD pipeline; не вызывайте `Database.Migrate()` автоматически без обсуждения.

## Секреты и конфигурация
- В локальной разработке используйте __User Secrets__ (`dotnet user-secrets`) и файл `.env` для простоты, не коммитите секреты.
- В продакшне используйте безопасный хранилище секретов (Azure Key Vault, AWS Secrets Manager и т.д.).

## CI/CD
- CI должен запускать сборку, тесты и статический анализ на каждом PR.
- CD должно применять миграции и выкатывать артефакты только после успешного прохождения тестов и ревью.

## Безопасность
- Проверяйте внешние зависимости на уязвимости.
- Не оставляйте `AllowAnyOrigin` и другие небезопасные политики в продакшне.

## Контакты
Если есть вопросы — открывайте issue или напишите автору репозитория.